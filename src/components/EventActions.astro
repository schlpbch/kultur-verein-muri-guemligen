---
import { Button } from '@/components/ui/button'

interface Props {
  event: {
    data: {
      title: string
      subtitle: string
      date: Date
      location: string
    }
  }
}
const { event } = Astro.props

const§ createCalendarLink = (event) => {
  const title = encodeURIComponent(event.data.title)
  const location = encodeURIComponent(event.data.location)
  const description = encodeURIComponent(event.data.subtitle)
  const startDate = event.data.date.toISOString().replace(/-|:|\.\d+/g, '')
  const endDate = event.data.date.toISOString().replace(/-|:|\.\d+/g, '')

  return `https://www.google.com/calendar/render?action=TEMPLATE&text=${title}&dates=${startDate}/${endDate}&details=${description}&location=${location}`
}
---

<div class="flex items-center gap-0">
  <a
    href="https://eventfrog.ch/de/p/kunst-ausstellungen/ausstellung/housi-knecht-atelierbesuch-7279466765205108892.html"
  >
    <Button variant="none" size="icon" alt="Ticket kaufen">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="lucide lucide-ticket-check"
        ><path
          d="M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"
        ></path><path d="m9 12 2 2 4-4"></path>
      </svg>
    </Button>
  </a>
  <a href={createCalendarLink(event)}>
    <Button variant="none" size="icon" alt="Zum Kalender hinzufügen">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="lucide lucide-calendar-check"
        ><path d="M8 2v4"></path><path d="M16 2v4"></path><rect
          width="18"
          height="18"
          x="3"
          y="4"
          rx="2"></rect><path d="M3 10h18"></path><path d="m9 16 2 2 4-4"
        ></path>
      </svg>
    </Button>
  </a>
</div>
